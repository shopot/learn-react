---
sidebar_position: 11
---

# Управление состоянием компонентов

В React есть два основных способа работы с данными: пропсы и состояние (state). Если пропсы используются для передачи информации вниз по дереву компонентов, то state позволяет сделать приложение интерактивным — изменять внешний вид и поведение компонентов при взаимодействии с пользователем.

## Что такое состояние (React State)?

State — это внутренняя, локальная для компонента информация, которая может изменяться с течением времени. Например, это может быть текст, введённый в поле формы, текущий выбранный элемент, состояние переключателя и многое другое.

## Хук `useState`

Для управления состоянием в функциональных компонентах React предоставляет специальную функцию — `useState`.
Это один из основных хуков React.

### Как работает useState?

`useState` принимает начальное значение состояния (например, пустую строку).

Возвращает массив из двух элементов:
  
1. Текущее значение состояния. 
2. Функция для обновления состояния — её называют set function или просто сеттер (setter).

```tsx
const [searchTerm, setSearchTerm] = useState('');
```

Здесь:

- `searchTerm` — это текущий текст, хранящийся в состоянии.
- `setSearchTerm` — функция, которая позволяет изменить значение переменной `searchTerm`.

### Немного про деструктуризацию массива

В примере выше используется деструктуризация массива — специальный синтаксис JavaScript, позволяющий удобно присваивать переменным значения из массива.

Альтернативный вариант без деструктуризации выглядел бы громоздко:

```ts
const stateArray = useState('');
const searchTerm = stateArray[0];
const setSearchTerm = stateArray[1];
```

Использование деструктуризации значительно улучшает читаемость кода.

Теперь давайте добавим состояние в компонент `App`:

```tsx
import React, { useState } from 'react';
import { List } from './components/List';
import { stories } from './stores/stories';

function App() {
  // Инициализация состояния пустой строкой
  const [searchTerm, setSearchTerm] = useState('');

  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {
    setSearchTerm(event.target.value);
  };

  console.log('Input changed:', searchTerm);

  return (
    <div>
      <h1>Frontend JavaScript frameworks</h1>
      <label htmlFor="search">Search: </label>
      <input
        id="search"
        type="text"
        onChange={handleChange} // Обработчик изменения поля ввода
      />
      <hr />
      <List items={stories} />
    </div>
  );
}

export default App;
```

**Как это работает?**

- При загрузке компонента `App`, React вызывает `useState` с пустой строкой, в этот момент происходит инициализация нашего состояния. 
- Внутри компонента `searchTerm` содержит текущее состояние (сначала пустая строка), а `setSearchTerm` — функцию для его обновления. 
- Когда пользователь вводит текст в поле, срабатывает событие `onChange`, вызывающее `handleChange`. 
- В `handleChange` вызывается `setSearchTerm` с новым значением из поля ввода. 
- React обновляет состояние и повторно рендерит компонент. 
- В новом рендере `searchTerm` содержит актуальное значение, которое выводится в консоль.

**Почему React State так важен?**

- Состояние позволяет компонентам отслеживать и реагировать на изменения данных внутри себя.
- При изменении состояния React автоматически обновляет интерфейс без необходимости напрямую манипулировать DOM.
- React State дает возможность создавать динамические и интерактивные приложения.

## Заключение

- `useState` — основной хук для управления локальным состоянием в функциональных компонентах React.
- Хук возвращает массив из текущего значения и функции для обновления этого значения.
- Деструктуризация при использовании useState помогает удобно работать с этим массивом, это общепринятый паттерн для хука `useState`.
- При изменении состояния компонент перерисовывается с новыми данными.


## Домашняя работа

Создайте второй компонент `Search` в который выделите из компонента `App` функционал и разметку связанные с  `input` и состоянием.

<details>
<summary>Решение - компонент Search</summary>

```tsx
// src/components/Search.tsx
import React, { useState } from 'react';

export const Search = () => {
  // Инициализация состояния пустой строкой
  const [searchTerm, setSearchTerm] = useState('');

  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {
    setSearchTerm(event.target.value);
  };

  console.log('Input changed:', searchTerm);

  return (
    <div>
      <label htmlFor="search">Search: </label>
      <input
        id="search"
        type="text"
        onChange={handleChange} // Обработчик изменения поля ввода
      />
    </div>
  );
};
```
</details>